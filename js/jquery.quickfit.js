!function(a){var b,c,d,e;return e="quickfit",d={min:8,max:12,tolerance:.02,truncate:!1,width:null,sampleNumberOfLetters:10,sampleFontSize:12},c=function(){function c(b){this.options=b,this.item=a('<span id="meassure"></span>'),this.item.css({position:"absolute",left:"-1000px",top:"-1000px","font-size":""+this.options.sampleFontSize+"px"}),a("body").append(this.item),this.meassures={}}var b=null;return c.instance=function(a){return b||(b=new c(a)),b},c.prototype.getMeassure=function(a){var b;return b=this.meassures[a],b||(b=this.setMeassure(a)),b},c.prototype.setMeassure=function(a){var b,c,d,e,f;for(e="",d=" "===a?"&nbsp;":a,c=0,f=this.options.sampleNumberOfLetters-1;0<=f?c<=f:c>=f;0<=f?c++:c--)e+=d;return this.item.html(e),b=this.item.width()/this.options.sampleNumberOfLetters/this.options.sampleFontSize,this.meassures[a]=b,b},c}(),b=function(){function b(b,f){this.$element=b,this.options=a.extend({},d,f),this.$element=a(this.$element),this._defaults=d,this._name=e,this.quickfitHelper=c.instance(this.options)}return b.prototype.fit=function(){var a;return this.options.width||(a=this.$element.width(),this.options.width=a-this.options.tolerance*a),(this.text=this.$element.attr("data-quickfit"))?this.previouslyTruncated=!0:this.text=this.$element.text(),this.calculateFontSize(),this.options.truncate&&this.truncate(),{$element:this.$element,size:this.fontSize}},b.prototype.calculateFontSize=function(){var a,b,c;for(b=0,c=0;c<this.text.length;++c)a=this.text.charAt(c),b+=this.quickfitHelper.getMeassure(a);return this.targetFontSize=parseInt(this.options.width/b),this.fontSize=Math.max(this.options.min,Math.min(this.options.max,this.targetFontSize))},b.prototype.truncate=function(){var a,b,c,d,e;if(this.fontSize>this.targetFontSize){for(d="",e=3*this.quickfitHelper.getMeassure(".")*this.fontSize,a=0;e<this.options.width&&a<this.text.length;)c=this.text[a++],b&&(d+=b),e+=this.fontSize*this.quickfitHelper.getMeassure(c),b=c;return d.length+1===this.text.length?d=this.text:d+="...",this.textWasTruncated=!0,this.$element.attr("data-quickfit",this.text).html(d)}if(this.previouslyTruncated)return this.$element.html(this.text)},b}(),a.fn.quickfit=function(a){for(var c=[],d=this.each(function(){var d=new b(this,a).fit();return c.push(d),d.$element}),e=0;e<c.length;e++){var f=c[e];f.$element.css({fontSize:f.size+"px"})}return d}}(jQuery,window);