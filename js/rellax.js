// Rellax.js - v1.0.0
// Copyright (c) 2016 Moe Amaya (@moeamaya)
// MIT license
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.Rellax=b()}(this,function(){var a=function(b,c){"use strict";var d=Object.create(a.prototype),e=0,f=0,g=[],h=!1,i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};if(d.options={speed:-2,center:!1,wrapper:null},c&&Object.keys(c).forEach(function(a){d.options[a]=c[a]}),d.options.speed<-10?d.options.speed=-10:d.options.speed>10&&(d.options.speed=10),b||(b=".rellax"),document.getElementsByClassName(b.replace(".","")))d.elems=document.getElementsByClassName(b.replace(".",""));else{if(document.querySelector(b)===!1)throw new Error("The elements you're trying to select don't exist.");d.elems=querySelector(b)}if(d.options.wrapper&&!d.options.wrapper.nodeType){var j=document.querySelector(d.options.wrapper);if(!j)throw new Error("The wrapper you're trying to use don't exist.");d.options.wrapper=j}var k=function(){for(var a=0;a<d.elems.length;a++){var b=m(d.elems[a]);g.push(b)}},l=function(){f=window.innerHeight,o(),k(),window.addEventListener("resize",function(){r()}),q(),r()},m=function(a){var b=d.options.wrapper?d.options.wrapper:document.body,c=a.getAttribute("data-rellax-percentage")||d.options.center?b.scrollTop:0,e=c+a.getBoundingClientRect().top,g=a.clientHeight||a.offsetHeight||a.scrollHeight,h=a.getAttribute("data-rellax-percentage")?a.getAttribute("data-rellax-percentage"):(c-e+f)/(g+f);d.options.center&&(h=.5);var i=a.getAttribute("data-rellax-speed")?n(a.getAttribute("data-rellax-speed"),10):d.options.speed;(a.getAttribute("data-rellax-percentage")||d.options.center)&&(i=a.getAttribute("data-rellax-speed")?n(a.getAttribute("data-rellax-speed"),5):n(d.options.speed,5));var j=p(h,i),k=a.style.cssText,l="";if(k.indexOf("transform")>=0){var m=k.indexOf("transform"),o=k.slice(m),q=o.indexOf(";");l=q?" "+o.slice(11,q).replace(/\s/g,""):" "+o.slice(11).replace(/\s/g,"")}return{base:j,top:e,height:g,speed:i,style:k,transform:l}},n=function(a,b){return a<-b?-b:a>b?b:a},o=function(){var a=e;return e=d.options.wrapper?d.options.wrapper.scrollTop:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,a!=e},p=function(a,b){var c=b*(100*(1-a));return Math.round(c)},q=function(){o()&&h===!1&&r(),i(q)},r=function(){for(var a=0;a<d.elems.length;a++){var b=(e-g[a].top+f)/(g[a].height+f),c=p(b,g[a].speed)-g[a].base,h=" translate3d(0,"+c+"px,0)"+g[a].transform;d.elems[a].style.cssText=g[a].style+"-webkit-transform:"+h+";-moz-transform:"+h+";transform:"+h+";"}};return d.refresh=function(){d.destroy(),f=window.innerHeight,g=[],k(),r(),h=!1},d.destroy=function(){for(var a=0;a<d.elems.length;a++)d.elems[a].style.cssText=g[a].style;h=!0},l(),d};return a});